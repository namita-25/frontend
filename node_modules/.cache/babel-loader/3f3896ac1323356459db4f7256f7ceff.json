{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { memo, forwardRef } from 'react';\nimport { Modal } from '../../composites/Modal';\nimport { usePropsResolution } from '../../../hooks';\nimport { Animated, PanResponder } from 'react-native';\nimport { ModalContext } from '../Modal/Context';\nimport Box from '../../primitives/Box';\nimport { ActionSheetContext } from './ActionSheetContext';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\nconst Content = /*#__PURE__*/memo( /*#__PURE__*/forwardRef((_ref, ref) => {\n  let {\n    hideDragIndicator,\n    children,\n    handleClose,\n    pan,\n    sheetHeight,\n    ...props\n  } = _ref;\n  const {\n    _dragIndicator,\n    _dragIndicatorWrapperOffSet,\n    _dragIndicatorWrapper,\n    ...resolvedProps\n  } = usePropsResolution('ActionsheetContent', props);\n  const handleCloseRef = React.useRef(null);\n  const handleCloseCallback = React.useCallback(() => {\n    let handleCloseCurrent = handleCloseRef.current; //@ts-ignore\n\n    return handleCloseCurrent();\n  }, []);\n  React.useEffect(() => {\n    handleCloseRef.current = handleClose;\n  }, [handleClose]);\n  const panResponder = React.useRef(PanResponder.create({\n    onStartShouldSetPanResponder: () => true,\n    onMoveShouldSetPanResponder: (_evt, gestureState) => {\n      return gestureState.dy > 15;\n    },\n    onPanResponderMove: (e, gestureState) => {\n      if (gestureState.dy > 0) {\n        Animated.event([null, {\n          dy: pan.y\n        }], {\n          useNativeDriver: false\n        })(e, gestureState);\n      }\n    },\n    onPanResponderRelease: (_e, gestureState) => {\n      // If sheet is dragged 1/4th of it's height, close it\n      if (sheetHeight.current / 4 - gestureState.dy < 0) {\n        Animated.timing(pan, {\n          toValue: {\n            x: 0,\n            y: sheetHeight.current\n          },\n          duration: 150,\n          useNativeDriver: true\n        }).start(handleCloseCallback);\n        setTimeout(() => {\n          Animated.timing(pan, {\n            toValue: {\n              x: 0,\n              y: 0\n            },\n            duration: 150,\n            useNativeDriver: true\n          }).start();\n        }, 300);\n      } else {\n        Animated.spring(pan, {\n          toValue: {\n            x: 0,\n            y: 0\n          },\n          overshootClamping: true,\n          useNativeDriver: true\n        }).start();\n      }\n    }\n  })).current;\n  return /*#__PURE__*/React.createElement(React.Fragment, null, !hideDragIndicator ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, _extends({}, panResponder.panHandlers, _dragIndicatorWrapperOffSet))) : null, /*#__PURE__*/React.createElement(Modal.Content, _extends({}, resolvedProps, {\n    ref: ref,\n    safeAreaBottom: true\n  }), !hideDragIndicator ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Box, _extends({}, panResponder.panHandlers, _dragIndicatorWrapper), /*#__PURE__*/React.createElement(Box, _dragIndicator))) : null, children));\n}));\n\nconst ActionsheetContent = (_ref2, ref) => {\n  let {\n    children,\n    ...props\n  } = _ref2;\n  // return null;\n  const {\n    handleClose\n  } = React.useContext(ModalContext);\n  const {\n    hideDragIndicator\n  } = React.useContext(ActionSheetContext);\n  const pan = React.useRef(new Animated.ValueXY()).current;\n  const sheetHeight = React.useRef(0);\n  const handleCloseCallback = React.useCallback(handleClose, [ModalContext, handleClose]); // useEffect(() => {\n  // }, [])\n  //TODO: refactor for responsive prop\n\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return /*#__PURE__*/React.createElement(Animated.View, {\n    style: {\n      transform: [{\n        translateY: pan.y\n      }],\n      width: '100%'\n    },\n    onLayout: event => {\n      const {\n        height\n      } = event.nativeEvent.layout;\n      sheetHeight.current = height;\n    },\n    pointerEvents: \"box-none\"\n  }, /*#__PURE__*/React.createElement(Content, _extends({\n    children: children,\n    sheetHeight: sheetHeight,\n    pan: pan,\n    hideDragIndicator: hideDragIndicator,\n    handleClose: handleCloseCallback,\n    ref: ref\n  }, props)));\n};\n\nexport default /*#__PURE__*/memo( /*#__PURE__*/forwardRef(ActionsheetContent));","map":{"version":3,"mappings":"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","names":["React","memo","forwardRef","Modal","usePropsResolution","Animated","PanResponder","ModalContext","Box","ActionSheetContext","useHasResponsiveProps","Content","ref","hideDragIndicator","children","handleClose","pan","sheetHeight","props","_dragIndicator","_dragIndicatorWrapperOffSet","_dragIndicatorWrapper","resolvedProps","handleCloseRef","useRef","handleCloseCallback","useCallback","handleCloseCurrent","current","useEffect","panResponder","create","onStartShouldSetPanResponder","onMoveShouldSetPanResponder","_evt","gestureState","dy","onPanResponderMove","e","event","y","useNativeDriver","onPanResponderRelease","_e","timing","toValue","x","duration","start","setTimeout","spring","overshootClamping","panHandlers","safeAreaBottom","ActionsheetContent","useContext","ValueXY","View","style","transform","translateY","width","onLayout","height","nativeEvent","layout","pointerEvents"],"sources":["/home/ttpl-rt-68/Documents/ULP/ulp-card/node_modules/native-base/lib/module/components/composites/Actionsheet/ActionsheetContent.tsx"],"sourcesContent":["import React, { memo, forwardRef } from 'react';\nimport { Modal } from '../../composites/Modal';\nimport type { IActionsheetContentProps } from './types';\nimport { usePropsResolution } from '../../../hooks';\nimport { Animated, PanResponder } from 'react-native';\nimport { ModalContext } from '../Modal/Context';\nimport Box from '../../primitives/Box';\nimport { ActionSheetContext } from './ActionSheetContext';\nimport { useHasResponsiveProps } from '../../../hooks/useHasResponsiveProps';\n\nconst Content = memo(\n  forwardRef(\n    (\n      {\n        hideDragIndicator,\n        children,\n        handleClose,\n        pan,\n        sheetHeight,\n        ...props\n      }: any,\n      ref: any\n    ) => {\n      const {\n        _dragIndicator,\n        _dragIndicatorWrapperOffSet,\n        _dragIndicatorWrapper,\n        ...resolvedProps\n      } = usePropsResolution('ActionsheetContent', props);\n\n      const handleCloseRef = React.useRef(null);\n      const handleCloseCallback = React.useCallback(() => {\n        let handleCloseCurrent = handleCloseRef.current;\n        //@ts-ignore\n        return handleCloseCurrent();\n      }, []);\n      React.useEffect(() => {\n        handleCloseRef.current = handleClose;\n      }, [handleClose]);\n\n      const panResponder = React.useRef(\n        PanResponder.create({\n          onStartShouldSetPanResponder: () => true,\n          onMoveShouldSetPanResponder: (_evt, gestureState) => {\n            return gestureState.dy > 15;\n          },\n          onPanResponderMove: (e, gestureState) => {\n            if (gestureState.dy > 0) {\n              Animated.event([null, { dy: pan.y }], {\n                useNativeDriver: false,\n              })(e, gestureState);\n            }\n          },\n          onPanResponderRelease: (_e, gestureState) => {\n            // If sheet is dragged 1/4th of it's height, close it\n            if (sheetHeight.current / 4 - gestureState.dy < 0) {\n              Animated.timing(pan, {\n                toValue: { x: 0, y: sheetHeight.current },\n                duration: 150,\n                useNativeDriver: true,\n              }).start(handleCloseCallback);\n\n              setTimeout(() => {\n                Animated.timing(pan, {\n                  toValue: { x: 0, y: 0 },\n                  duration: 150,\n                  useNativeDriver: true,\n                }).start();\n              }, 300);\n            } else {\n              Animated.spring(pan, {\n                toValue: { x: 0, y: 0 },\n                overshootClamping: true,\n                useNativeDriver: true,\n              }).start();\n            }\n          },\n        })\n      ).current;\n\n      return (\n        <>\n          {!hideDragIndicator ? (\n            <>\n              {/* To increase the draggable area */}\n              <Box\n                {...panResponder.panHandlers}\n                {..._dragIndicatorWrapperOffSet}\n              />\n            </>\n          ) : null}\n\n          <Modal.Content {...resolvedProps} ref={ref} safeAreaBottom>\n            {!hideDragIndicator ? (\n              <>\n                {/* Hack. Fix later. Add -2 negative margin to remove the padding added by ActionSheetContent */}\n                <Box {...panResponder.panHandlers} {..._dragIndicatorWrapper}>\n                  <Box {..._dragIndicator} />\n                </Box>\n              </>\n            ) : null}\n\n            {children}\n          </Modal.Content>\n        </>\n      );\n    }\n  )\n);\nconst ActionsheetContent = (\n  { children, ...props }: IActionsheetContentProps,\n  ref?: any\n) => {\n  // return null;\n  const { handleClose } = React.useContext(ModalContext);\n  const { hideDragIndicator } = React.useContext(ActionSheetContext);\n  const pan = React.useRef(new Animated.ValueXY()).current;\n  const sheetHeight = React.useRef(0);\n\n  const handleCloseCallback = React.useCallback(handleClose, [\n    ModalContext,\n    handleClose,\n  ]);\n\n  // useEffect(() => {\n\n  // }, [])\n\n  //TODO: refactor for responsive prop\n  if (useHasResponsiveProps(props)) {\n    return null;\n  }\n\n  return (\n    <Animated.View\n      style={{\n        transform: [{ translateY: pan.y }],\n        width: '100%',\n      }}\n      onLayout={(event) => {\n        const { height } = event.nativeEvent.layout;\n        sheetHeight.current = height;\n      }}\n      pointerEvents=\"box-none\"\n    >\n      <Content\n        children={children}\n        sheetHeight={sheetHeight}\n        pan={pan}\n        hideDragIndicator={hideDragIndicator}\n        handleClose={handleCloseCallback}\n        ref={ref}\n        {...props}\n      />\n    </Animated.View>\n  );\n};\n\nexport default memo(forwardRef(ActionsheetContent));\n"]},"metadata":{},"sourceType":"module"}