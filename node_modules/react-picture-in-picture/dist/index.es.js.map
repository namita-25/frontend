{"version":3,"file":"index.es.js","sources":["../src/index.js"],"sourcesContent":["import propTypes from 'prop-types'\nimport React, { useEffect } from 'react'\nconst ReactPictureInPicture = ({ id = 'videopip', callBackSuccessOnEnable, callBackSuccessOnDisable, isActive = false, style, className, autoplay = false, controls = true, loop = false, children, muted = false, classOnEnable }) => {\n  ReactPictureInPicture.propTypes = {\n    /** set a custom id to the video player (#videopip by default) (not required) */\n    id: propTypes.string,\n    /** state that allow to turn on or of the pip mode */\n    isActive: propTypes.bool,\n    /** function that would be called if the media where successfully go to pip mode (not required) */\n    callBackSuccessOnEnable: propTypes.func,\n    /** function called when the pip mode is successfully disabled */\n    callBackSuccessOnDisable: propTypes.func,\n    /** style that would be apply to the video element (not required) */\n    style: propTypes.object,\n    /** className that would be apply to the video element (not required)  */\n    className: propTypes.string,\n    /** enable autoplay on the video player (not required) */\n    autoplay: propTypes.bool,\n    /** enable or not video controls  */\n    controls: propTypes.bool,\n    /** children element that can be include between the <video></video> element */\n    children: propTypes.oneOfType([propTypes.arrayOf(propTypes.node), propTypes.node]),\n    /** enable loop play on the video */\n    loop: propTypes.bool,\n    /** mute the video player sound */\n    muted: propTypes.bool,\n    /** css class that would be activate on the video player when pip mode is enable */\n    classOnEnable: propTypes.string\n  }\n  /**\n   * toggle the video player in pip mode \n   */\n  const togglePIP = () => {\n    let player = document.getElementById(id)\n    if (player.readyState === 4) { // if video is ready to play\n      if (document.pictureInPictureElement && !isActive) { // if document is already on pip mod\n        document.exitPictureInPicture() // disable pip\n          .then(() => {\n            if (callBackSuccessOnDisable) { // call the success disable callback if set\n              callBackSuccessOnDisable()\n            }\n          })\n      } else {\n        player.requestPictureInPicture()\n          .then(() => { // pip enabled successfully\n            if (callBackSuccessOnEnable) { // call the success enable callbakc if set\n              callBackSuccessOnEnable()\n            }\n          })\n      }\n    }\n  }\n  /**\n   * Handle pip status when isActive is updated\n   */\n  useEffect(() => {\n    togglePIP()\n  }, [isActive])\n\n  return (<video id={id} className={`${className} ${isActive ? classOnEnable : ''} `} style={style}  controls={controls} autoPlay={autoplay} loop={loop} muted={muted}>\n    {children}\n  </video>\n  )\n}\n\nexport default ReactPictureInPicture\n"],"names":["ReactPictureInPicture","id","callBackSuccessOnEnable","callBackSuccessOnDisable","isActive","style","className","autoplay","controls","loop","children","muted","classOnEnable","propTypes","string","bool","func","object","oneOfType","arrayOf","node","togglePIP","player","document","getElementById","readyState","pictureInPictureElement","exitPictureInPicture","then","requestPictureInPicture"],"mappings":";;;AAEA,IAAMA,wBAAwB,SAAxBA,qBAAwB,OAAyM;qBAAtMC,EAAsM;MAAtMA,EAAsM,2BAAjM,UAAiM;MAArLC,uBAAqL,QAArLA,uBAAqL;MAA5JC,wBAA4J,QAA5JA,wBAA4J;2BAAlIC,QAAkI;MAAlIA,QAAkI,iCAAvH,KAAuH;MAAhHC,KAAgH,QAAhHA,KAAgH;MAAzGC,SAAyG,QAAzGA,SAAyG;2BAA9FC,QAA8F;MAA9FA,QAA8F,iCAAnF,KAAmF;2BAA5EC,QAA4E;MAA5EA,QAA4E,iCAAjE,IAAiE;uBAA3DC,IAA2D;MAA3DA,IAA2D,6BAApD,KAAoD;MAA7CC,QAA6C,QAA7CA,QAA6C;wBAAnCC,KAAmC;MAAnCA,KAAmC,8BAA3B,KAA2B;MAApBC,aAAoB,QAApBA,aAAoB;;wBAC/MC,SAAtB,GAAkC;;QAE5BA,UAAUC,MAFkB;;cAItBD,UAAUE,IAJY;;6BAMPF,UAAUG,IANH;;8BAQNH,UAAUG,IARJ;;WAUzBH,UAAUI,MAVe;;eAYrBJ,UAAUC,MAZW;;cActBD,UAAUE,IAdY;;cAgBtBF,UAAUE,IAhBY;;cAkBtBF,UAAUK,SAAV,CAAoB,CAACL,UAAUM,OAAV,CAAkBN,UAAUO,IAA5B,CAAD,EAAoCP,UAAUO,IAA9C,CAApB,CAlBsB;;UAoB1BP,UAAUE,IApBgB;;WAsBzBF,UAAUE,IAtBe;;mBAwBjBF,UAAUC;;;;GAxB3B,CA6BA,IAAMO,YAAY,SAAZA,SAAY,GAAM;QAClBC,SAASC,SAASC,cAAT,CAAwBvB,EAAxB,CAAb;QACIqB,OAAOG,UAAP,KAAsB,CAA1B,EAA6B;;UACvBF,SAASG,uBAAT,IAAoC,CAACtB,QAAzC,EAAmD;;iBACxCuB,oBAAT;SACGC,IADH,CACQ,YAAM;cACNzB,wBAAJ,EAA8B;;;;SAFlC;OADF,MAOO;eACE0B,uBAAP,GACGD,IADH,CACQ,YAAM;;cACN1B,uBAAJ,EAA6B;;;;SAFjC;;;GAXN;;;;YAuBU,YAAM;;GAAhB,EAEG,CAACE,QAAD,CAFH;;SAIQ;;MAAO,IAAIH,EAAX,EAAe,WAAcK,SAAd,UAA2BF,WAAWQ,aAAX,GAA2B,EAAtD,OAAf,EAA4E,OAAOP,KAAnF,EAA2F,UAAUG,QAArG,EAA+G,UAAUD,QAAzH,EAAmI,MAAME,IAAzI,EAA+I,OAAOE,KAAtJ;;GAAR;CAzDF;;;;"}