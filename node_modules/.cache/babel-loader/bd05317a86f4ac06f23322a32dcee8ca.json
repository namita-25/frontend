{"ast":null,"code":"import merge from 'lodash.merge';\nconst SPECIFICITY_100 = 100;\nconst SPECIFICITY_70 = 70;\nconst SPECIFICITY_60 = 60;\nconst SPECIFICITY_55 = 55;\nconst SPECIFICITY_50 = 50;\nconst SPECIFICITY_40 = 40;\nconst SPECIFICITY_30 = 30;\nconst SPECIFICITY_10 = 10;\nconst SPECIFICITY_1 = 1;\nconst specificityPrecedence = [SPECIFICITY_100, SPECIFICITY_70, SPECIFICITY_60, SPECIFICITY_55, SPECIFICITY_50, SPECIFICITY_40, SPECIFICITY_30, SPECIFICITY_10, SPECIFICITY_1];\nconst INITIAL_PROP_SPECIFICITY = {\n  [SPECIFICITY_100]: 0,\n  [SPECIFICITY_70]: 0,\n  [SPECIFICITY_60]: 0,\n  [SPECIFICITY_50]: 0,\n  [SPECIFICITY_55]: 0,\n  [SPECIFICITY_40]: 0,\n  [SPECIFICITY_30]: 0,\n  [SPECIFICITY_10]: 0,\n  [SPECIFICITY_1]: 0\n};\nconst pseudoPropsMap = {\n  _web: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _ios: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _android: {\n    dependentOn: 'platform',\n    priority: SPECIFICITY_10\n  },\n  _light: {\n    dependentOn: 'colormode',\n    priority: SPECIFICITY_10\n  },\n  _dark: {\n    dependentOn: 'colormode',\n    priority: SPECIFICITY_10\n  },\n  // TODO: have to add more interactionProps and stateProps\n  _indeterminate: {\n    dependentOn: 'state',\n    respondTo: 'isIndeterminate',\n    priority: SPECIFICITY_30\n  },\n  _checked: {\n    dependentOn: 'state',\n    respondTo: 'isChecked',\n    priority: SPECIFICITY_30\n  },\n  // Add new pseudeo props in between -------\n  _readOnly: {\n    dependentOn: 'state',\n    respondTo: 'isReadOnly',\n    priority: SPECIFICITY_30\n  },\n  // Add new pseudeo props in between -------\n  _invalid: {\n    dependentOn: 'state',\n    respondTo: 'isInvalid',\n    priority: SPECIFICITY_40\n  },\n  _focus: {\n    dependentOn: 'state',\n    respondTo: 'isFocused',\n    priority: SPECIFICITY_50\n  },\n  _focusVisible: {\n    dependentOn: 'state',\n    respondTo: 'isFocusVisible',\n    priority: SPECIFICITY_55\n  },\n  _hover: {\n    dependentOn: 'state',\n    respondTo: 'isHovered',\n    priority: SPECIFICITY_60\n  },\n  _pressed: {\n    dependentOn: 'state',\n    respondTo: 'isPressed',\n    priority: SPECIFICITY_70\n  },\n  _disabled: {\n    dependentOn: 'state',\n    respondTo: 'isDisabled',\n    priority: SPECIFICITY_100\n  }\n};\nexport const compareSpecificity = (exisiting, upcoming, ignorebaseTheme) => // property?: any\n{\n  if (!exisiting) return true;\n  if (!upcoming) return false;\n  const condition = ignorebaseTheme ? specificityPrecedence.length - 1 : specificityPrecedence.length;\n\n  for (let index = 0; index < condition; index++) {\n    if (exisiting[specificityPrecedence[index]] > upcoming[specificityPrecedence[index]]) {\n      return false;\n    } else if (exisiting[specificityPrecedence[index]] < upcoming[specificityPrecedence[index]]) {\n      return true;\n    }\n  }\n\n  return true;\n};\n\nconst shouldResolvePseudoProp = _ref => {\n  let {\n    property,\n    state,\n    platform,\n    colormode\n  } = _ref;\n\n  if (pseudoPropsMap[property].dependentOn === 'platform') {\n    return property === \"_\".concat(platform);\n  } else if (pseudoPropsMap[property].dependentOn === 'colormode') {\n    return property === \"_\".concat(colormode);\n  } else if (pseudoPropsMap[property].dependentOn === 'state') {\n    return state[pseudoPropsMap[property].respondTo];\n  } else {\n    return false;\n  }\n};\n\nconst simplifyProps = function (_ref2) {\n  let {\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificity,\n    previouslyFlattenProps\n  } = _ref2;\n  let flattenProps = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let specificityMap = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  let priority = arguments.length > 3 ? arguments[3] : undefined;\n\n  for (const property in props) {\n    var _pseudoPropsMap$prope, _pseudoPropsMap$prope2; // NOTE: the order is important here. Keep in mind while specificity breakpoints.\n\n\n    const propertySpecity = currentSpecificity ? { ...currentSpecificity\n    } : { ...INITIAL_PROP_SPECIFICITY,\n      [SPECIFICITY_1]: priority\n    };\n\n    if (state[(_pseudoPropsMap$prope = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope === void 0 ? void 0 : _pseudoPropsMap$prope.respondTo] || ['_dark', '_light', '_web', '_ios', '_android'].includes(property)) {\n      if (shouldResolvePseudoProp({\n        property,\n        state,\n        platform,\n        colormode\n      })) {\n        propertySpecity[pseudoPropsMap[property].priority]++;\n        simplifyProps({\n          props: props[property],\n          colormode,\n          platform,\n          state,\n          currentSpecificity: propertySpecity,\n          previouslyFlattenProps: previouslyFlattenProps\n        }, flattenProps, specificityMap, priority);\n      }\n    } else if (state[(_pseudoPropsMap$prope2 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope2 === void 0 ? void 0 : _pseudoPropsMap$prope2.respondTo] === undefined) {\n      if (property.startsWith('_')) {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity; // merging internal props (like, _text, _checked, ...)\n\n          flattenProps[property] = merge({}, flattenProps[property], props[property]);\n        } else {\n          flattenProps[property] = merge({}, props[property], flattenProps[property]);\n        }\n      } else {\n        if (compareSpecificity(specificityMap[property], propertySpecity, false)) {\n          specificityMap[property] = propertySpecity; // replacing simple props (like, p, m, bg, color, ...)\n\n          flattenProps[property] = props[property];\n        }\n      }\n    }\n  }\n};\n\nexport const propsFlattener = (_ref3, priority) => {\n  let {\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificityMap,\n    previouslyFlattenProps\n  } = _ref3;\n  const flattenProps = {};\n\n  for (const property in props) {\n    var _pseudoPropsMap$prope3;\n\n    if (state[(_pseudoPropsMap$prope3 = pseudoPropsMap[property]) === null || _pseudoPropsMap$prope3 === void 0 ? void 0 : _pseudoPropsMap$prope3.respondTo] === undefined && property.startsWith('_')) {\n      flattenProps[property] = previouslyFlattenProps[property];\n    }\n  }\n\n  const specificityMap = currentSpecificityMap || {}; // STEP 1.a (if): Check weather it should be recursively resolved\n  // NOTE: (when true) recursively resolved it\n  // STEP 1.b (else if): Check specificty\n  // STEP 1.b.i: Check for pseudo props\n  // NOTE: (when true) Merge it.\n  // NOTE: (when false) Replace it.\n\n  simplifyProps({\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificityMap,\n    previouslyFlattenProps\n  }, flattenProps, specificityMap, priority);\n  return [flattenProps, specificityMap];\n};","map":{"version":3,"mappings":"AAAA,OAAOA,KAAP,MAAkB,cAAlB;AAEA,MAAMC,eAAe,GAAG,GAAxB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,cAAc,GAAG,EAAvB;AACA,MAAMC,aAAa,GAAG,CAAtB;AACA,MAAMC,qBAAqB,GAAG,CAC5BT,eAD4B,EAE5BC,cAF4B,EAG5BC,cAH4B,EAI5BC,cAJ4B,EAK5BC,cAL4B,EAM5BC,cAN4B,EAO5BC,cAP4B,EAQ5BC,cAR4B,EAS5BC,aAT4B,CAA9B;AAWA,MAAME,wBAAwB,GAAG;EAC/B,CAACV,eAAD,GAAmB,CADY;EAE/B,CAACC,cAAD,GAAkB,CAFa;EAG/B,CAACC,cAAD,GAAkB,CAHa;EAI/B,CAACE,cAAD,GAAkB,CAJa;EAK/B,CAACD,cAAD,GAAkB,CALa;EAM/B,CAACE,cAAD,GAAkB,CANa;EAO/B,CAACC,cAAD,GAAkB,CAPa;EAQ/B,CAACC,cAAD,GAAkB,CARa;EAS/B,CAACC,aAAD,GAAiB;AATc,CAAjC;AAYA,MAAMG,cAAmB,GAAG;EAC1BC,IAAI,EAAE;IAAEC,WAAW,EAAE,UAAf;IAA2BC,QAAQ,EAAEP;EAArC,CADoB;EAE1BQ,IAAI,EAAE;IAAEF,WAAW,EAAE,UAAf;IAA2BC,QAAQ,EAAEP;EAArC,CAFoB;EAG1BS,QAAQ,EAAE;IAAEH,WAAW,EAAE,UAAf;IAA2BC,QAAQ,EAAEP;EAArC,CAHgB;EAK1BU,MAAM,EAAE;IAAEJ,WAAW,EAAE,WAAf;IAA4BC,QAAQ,EAAEP;EAAtC,CALkB;EAM1BW,KAAK,EAAE;IAAEL,WAAW,EAAE,WAAf;IAA4BC,QAAQ,EAAEP;EAAtC,CANmB;EAQ1B;EACAY,cAAc,EAAE;IACdN,WAAW,EAAE,OADC;IAEdO,SAAS,EAAE,iBAFG;IAGdN,QAAQ,EAAER;EAHI,CATU;EAc1Be,QAAQ,EAAE;IACRR,WAAW,EAAE,OADL;IAERO,SAAS,EAAE,WAFH;IAGRN,QAAQ,EAAER;EAHF,CAdgB;EAmB1B;EACAgB,SAAS,EAAE;IACTT,WAAW,EAAE,OADJ;IAETO,SAAS,EAAE,YAFF;IAGTN,QAAQ,EAAER;EAHD,CApBe;EAyB1B;EACAiB,QAAQ,EAAE;IACRV,WAAW,EAAE,OADL;IAERO,SAAS,EAAE,WAFH;IAGRN,QAAQ,EAAET;EAHF,CA1BgB;EA+B1BmB,MAAM,EAAE;IACNX,WAAW,EAAE,OADP;IAENO,SAAS,EAAE,WAFL;IAGNN,QAAQ,EAAEV;EAHJ,CA/BkB;EAoC1BqB,aAAa,EAAE;IACbZ,WAAW,EAAE,OADA;IAEbO,SAAS,EAAE,gBAFE;IAGbN,QAAQ,EAAEX;EAHG,CApCW;EAyC1BuB,MAAM,EAAE;IACNb,WAAW,EAAE,OADP;IAENO,SAAS,EAAE,WAFL;IAGNN,QAAQ,EAAEZ;EAHJ,CAzCkB;EA8C1ByB,QAAQ,EAAE;IACRd,WAAW,EAAE,OADL;IAERO,SAAS,EAAE,WAFH;IAGRN,QAAQ,EAAEb;EAHF,CA9CgB;EAmD1B2B,SAAS,EAAE;IACTf,WAAW,EAAE,OADJ;IAETO,SAAS,EAAE,YAFF;IAGTN,QAAQ,EAAEd;EAHD;AAnDe,CAA5B;AA0DA,OAAO,MAAM6B,kBAAkB,GAAG,CAChCC,SADgC,EAEhCC,QAFgC,EAGhCC,eAHgC,KAIhC;AACG;EACH,IAAI,CAACF,SAAL,EAAgB,OAAO,IAAP;EAChB,IAAI,CAACC,QAAL,EAAe,OAAO,KAAP;EACf,MAAME,SAAS,GAAGD,eAAe,GAC7BvB,qBAAqB,CAACyB,MAAtBzB,GAA+B,CADF,GAE7BA,qBAAqB,CAACyB,MAF1B;;EAGA,KAAK,IAAIC,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAGF,SAA5B,EAAuCE,KAAK,EAA5C,EAAgD;IAC9C,IACEL,SAAS,CAACrB,qBAAqB,CAAC0B,KAAD,CAAtB,CAATL,GACAC,QAAQ,CAACtB,qBAAqB,CAAC0B,KAAD,CAAtB,CAFV,EAGE;MACA,OAAO,KAAP;IAJF,OAKO,IACLL,SAAS,CAACrB,qBAAqB,CAAC0B,KAAD,CAAtB,CAATL,GACAC,QAAQ,CAACtB,qBAAqB,CAAC0B,KAAD,CAAtB,CAFH,EAGL;MACA,OAAO,IAAP;IACD;EACF;;EACD,OAAO,IAAP;AAxBK;;AA2BP,MAAMC,uBAAuB,GAAG,QAKrB;EAAA,IALsB;IAC/BC,QAD+B;IAE/BC,KAF+B;IAG/BC,QAH+B;IAI/BC;EAJ+B,CAKtB;;EACT,IAAI7B,cAAc,CAAC0B,QAAD,CAAd1B,CAAyBE,WAAzBF,KAAyC,UAA7C,EAAyD;IACvD,OAAO0B,QAAQ,gBAASE,QAAT,CAAf;EADF,OAEO,IAAI5B,cAAc,CAAC0B,QAAD,CAAd1B,CAAyBE,WAAzBF,KAAyC,WAA7C,EAA0D;IAC/D,OAAO0B,QAAQ,gBAASG,SAAT,CAAf;EADK,OAEA,IAAI7B,cAAc,CAAC0B,QAAD,CAAd1B,CAAyBE,WAAzBF,KAAyC,OAA7C,EAAsD;IAC3D,OAAO2B,KAAK,CAAC3B,cAAc,CAAC0B,QAAD,CAAd1B,CAAyBS,SAA1B,CAAZ;EADK,OAEA;IACL,OAAO,KAAP;EACD;AAdH;;AAiBA,MAAMqB,aAAa,GAAG,iBAYjB;EAAA,IAXH;IACEC,KADF;IAEEF,SAFF;IAGED,QAHF;IAIED,KAJF;IAKEK,kBALF;IAMEC;EANF,CAWG;EAAA,IAHHC,YAGG,uEAHiB,EAGjB;EAAA,IAFHC,cAEG,uEAFmB,EAEnB;EAAA,IADHhC,QACG;;EACH,KAAK,MAAMuB,QAAX,IAAuBK,KAAvB,EAA8B;IAAA,mDAC5B;;;IACA,MAAMK,eAAe,GAAGJ,kBAAkB,GACtC,EAAE,GAAGA;IAAL,CADsC,GAEtC,EACE,GAAGjC,wBADL;MAEE,CAACF,aAAD,GAAiBM;IAFnB,CAFJ;;IAOA,IACEwB,KAAK,0BAAC3B,cAAc,CAAC0B,QAAD,CAAf,0DAACW,sBAA0B5B,SAA3B,CAALkB,IACA,CAAC,OAAD,EAAU,QAAV,EAAoB,MAApB,EAA4B,MAA5B,EAAoC,UAApC,EAAgDW,QAAhD,CAAyDZ,QAAzD,CAFF,EAGE;MACA,IAAID,uBAAuB,CAAC;QAAEC,QAAF;QAAYC,KAAZ;QAAmBC,QAAnB;QAA6BC;MAA7B,CAAD,CAA3B,EAAuE;QACrEO,eAAe,CAACpC,cAAc,CAAC0B,QAAD,CAAd1B,CAAyBG,QAA1B,CAAfiC;QAEAN,aAAa,CACX;UACEC,KAAK,EAAEA,KAAK,CAACL,QAAD,CADd;UAEEG,SAFF;UAGED,QAHF;UAIED,KAJF;UAKEK,kBAAkB,EAAEI,eALtB;UAMEH,sBAAsB,EAAEA;QAN1B,CADW,EASXC,YATW,EAUXC,cAVW,EAWXhC,QAXW,CAAb2B;MAaD;IApBH,OAqBO,IAAIH,KAAK,2BAAC3B,cAAc,CAAC0B,QAAD,CAAf,2DAACa,uBAA0B9B,SAA3B,CAALkB,KAA+Ca,SAAnD,EAA8D;MACnE,IAAId,QAAQ,CAACe,UAATf,CAAoB,GAApBA,CAAJ,EAA8B;QAC5B,IACER,kBAAkB,CAACiB,cAAc,CAACT,QAAD,CAAf,EAA2BU,eAA3B,EAA4C,KAA5C,CADpB,EAEE;UACAD,cAAc,CAACT,QAAD,CAAdS,GAA2BC,eAA3BD,CADA,CAEA;;UACAD,YAAY,CAACR,QAAD,CAAZQ,GAAyB9C,KAAK,CAC5B,EAD4B,EAE5B8C,YAAY,CAACR,QAAD,CAFgB,EAG5BK,KAAK,CAACL,QAAD,CAHuB,CAA9BQ;QALF,OAUO;UACLA,YAAY,CAACR,QAAD,CAAZQ,GAAyB9C,KAAK,CAC5B,EAD4B,EAE5B2C,KAAK,CAACL,QAAD,CAFuB,EAG5BQ,YAAY,CAACR,QAAD,CAHgB,CAA9BQ;QAKD;MAjBH,OAkBO;QACL,IACEhB,kBAAkB,CAACiB,cAAc,CAACT,QAAD,CAAf,EAA2BU,eAA3B,EAA4C,KAA5C,CADpB,EAEE;UACAD,cAAc,CAACT,QAAD,CAAdS,GAA2BC,eAA3BD,CADA,CAEA;;UACAD,YAAY,CAACR,QAAD,CAAZQ,GAAyBH,KAAK,CAACL,QAAD,CAA9BQ;QACD;MACF;IACF;EACF;AAxEH;;AA2EA,OAAO,MAAMQ,cAAc,GAAG,QAS5BvC,QAT4B,KAUzB;EAAA,IATH;IACE4B,KADF;IAEEF,SAFF;IAGED,QAHF;IAIED,KAJF;IAKEgB,qBALF;IAMEV;EANF,CASG;EACH,MAAMC,YAAiB,GAAG,EAA1B;;EAEA,KAAK,MAAMR,QAAX,IAAuBK,KAAvB,EAA8B;IAAA;;IAC5B,IACEJ,KAAK,2BAAC3B,cAAc,CAAC0B,QAAD,CAAf,2DAACkB,uBAA0BnC,SAA3B,CAALkB,KAA+Ca,SAA/Cb,IACAD,QAAQ,CAACe,UAATf,CAAoB,GAApBA,CAFF,EAGE;MACAQ,YAAY,CAACR,QAAD,CAAZQ,GAAyBD,sBAAsB,CAACP,QAAD,CAA/CQ;IACD;EACF;;EAED,MAAMC,cAAc,GAAGQ,qBAAqB,IAAI,EAAhD,CAZG,CAcH;EACA;EACA;EACA;EACA;EACA;;EAEAb,aAAa,CACX;IACEC,KADF;IAEEF,SAFF;IAGED,QAHF;IAIED,KAJF;IAKEgB,qBALF;IAMEV;EANF,CADW,EASXC,YATW,EAUXC,cAVW,EAWXhC,QAXW,CAAb2B;EAcA,OAAO,CAACI,YAAD,EAAeC,cAAf,CAAP;AA7CK","names":["merge","SPECIFICITY_100","SPECIFICITY_70","SPECIFICITY_60","SPECIFICITY_55","SPECIFICITY_50","SPECIFICITY_40","SPECIFICITY_30","SPECIFICITY_10","SPECIFICITY_1","specificityPrecedence","INITIAL_PROP_SPECIFICITY","pseudoPropsMap","_web","dependentOn","priority","_ios","_android","_light","_dark","_indeterminate","respondTo","_checked","_readOnly","_invalid","_focus","_focusVisible","_hover","_pressed","_disabled","compareSpecificity","exisiting","upcoming","ignorebaseTheme","condition","length","index","shouldResolvePseudoProp","property","state","platform","colormode","simplifyProps","props","currentSpecificity","previouslyFlattenProps","flattenProps","specificityMap","propertySpecity","_pseudoPropsMap$prope","includes","_pseudoPropsMap$prope2","undefined","startsWith","propsFlattener","currentSpecificityMap","_pseudoPropsMap$prope3"],"sources":["/home/ttpl-rt-68/Documents/ULP/ulp-card/node_modules/native-base/lib/module/hooks/useThemeProps/propsFlattenerTest.tsx"],"sourcesContent":["import merge from 'lodash.merge';\n\nconst SPECIFICITY_100 = 100;\nconst SPECIFICITY_70 = 70;\nconst SPECIFICITY_60 = 60;\nconst SPECIFICITY_55 = 55;\nconst SPECIFICITY_50 = 50;\nconst SPECIFICITY_40 = 40;\nconst SPECIFICITY_30 = 30;\nconst SPECIFICITY_10 = 10;\nconst SPECIFICITY_1 = 1;\nconst specificityPrecedence = [\n  SPECIFICITY_100,\n  SPECIFICITY_70,\n  SPECIFICITY_60,\n  SPECIFICITY_55,\n  SPECIFICITY_50,\n  SPECIFICITY_40,\n  SPECIFICITY_30,\n  SPECIFICITY_10,\n  SPECIFICITY_1,\n];\nconst INITIAL_PROP_SPECIFICITY = {\n  [SPECIFICITY_100]: 0,\n  [SPECIFICITY_70]: 0,\n  [SPECIFICITY_60]: 0,\n  [SPECIFICITY_50]: 0,\n  [SPECIFICITY_55]: 0,\n  [SPECIFICITY_40]: 0,\n  [SPECIFICITY_30]: 0,\n  [SPECIFICITY_10]: 0,\n  [SPECIFICITY_1]: 0,\n};\n\nconst pseudoPropsMap: any = {\n  _web: { dependentOn: 'platform', priority: SPECIFICITY_10 },\n  _ios: { dependentOn: 'platform', priority: SPECIFICITY_10 },\n  _android: { dependentOn: 'platform', priority: SPECIFICITY_10 },\n\n  _light: { dependentOn: 'colormode', priority: SPECIFICITY_10 },\n  _dark: { dependentOn: 'colormode', priority: SPECIFICITY_10 },\n\n  // TODO: have to add more interactionProps and stateProps\n  _indeterminate: {\n    dependentOn: 'state',\n    respondTo: 'isIndeterminate',\n    priority: SPECIFICITY_30,\n  },\n  _checked: {\n    dependentOn: 'state',\n    respondTo: 'isChecked',\n    priority: SPECIFICITY_30,\n  },\n  // Add new pseudeo props in between -------\n  _readOnly: {\n    dependentOn: 'state',\n    respondTo: 'isReadOnly',\n    priority: SPECIFICITY_30,\n  },\n  // Add new pseudeo props in between -------\n  _invalid: {\n    dependentOn: 'state',\n    respondTo: 'isInvalid',\n    priority: SPECIFICITY_40,\n  },\n  _focus: {\n    dependentOn: 'state',\n    respondTo: 'isFocused',\n    priority: SPECIFICITY_50,\n  },\n  _focusVisible: {\n    dependentOn: 'state',\n    respondTo: 'isFocusVisible',\n    priority: SPECIFICITY_55,\n  },\n  _hover: {\n    dependentOn: 'state',\n    respondTo: 'isHovered',\n    priority: SPECIFICITY_60,\n  },\n  _pressed: {\n    dependentOn: 'state',\n    respondTo: 'isPressed',\n    priority: SPECIFICITY_70,\n  },\n  _disabled: {\n    dependentOn: 'state',\n    respondTo: 'isDisabled',\n    priority: SPECIFICITY_100,\n  },\n};\n\nexport const compareSpecificity = (\n  exisiting: any,\n  upcoming: any,\n  ignorebaseTheme?: boolean\n  // property?: any\n) => {\n  if (!exisiting) return true;\n  if (!upcoming) return false;\n  const condition = ignorebaseTheme\n    ? specificityPrecedence.length - 1\n    : specificityPrecedence.length;\n  for (let index = 0; index < condition; index++) {\n    if (\n      exisiting[specificityPrecedence[index]] >\n      upcoming[specificityPrecedence[index]]\n    ) {\n      return false;\n    } else if (\n      exisiting[specificityPrecedence[index]] <\n      upcoming[specificityPrecedence[index]]\n    ) {\n      return true;\n    }\n  }\n  return true;\n};\n\nconst shouldResolvePseudoProp = ({\n  property,\n  state,\n  platform,\n  colormode,\n}: any) => {\n  if (pseudoPropsMap[property].dependentOn === 'platform') {\n    return property === `_${platform}`;\n  } else if (pseudoPropsMap[property].dependentOn === 'colormode') {\n    return property === `_${colormode}`;\n  } else if (pseudoPropsMap[property].dependentOn === 'state') {\n    return state[pseudoPropsMap[property].respondTo];\n  } else {\n    return false;\n  }\n};\n\nconst simplifyProps = (\n  {\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificity,\n    previouslyFlattenProps,\n  }: any,\n  flattenProps: any = {},\n  specificityMap: any = {},\n  priority: number\n) => {\n  for (const property in props) {\n    // NOTE: the order is important here. Keep in mind while specificity breakpoints.\n    const propertySpecity = currentSpecificity\n      ? { ...currentSpecificity }\n      : {\n          ...INITIAL_PROP_SPECIFICITY,\n          [SPECIFICITY_1]: priority,\n        };\n\n    if (\n      state[pseudoPropsMap[property]?.respondTo] ||\n      ['_dark', '_light', '_web', '_ios', '_android'].includes(property)\n    ) {\n      if (shouldResolvePseudoProp({ property, state, platform, colormode })) {\n        propertySpecity[pseudoPropsMap[property].priority]++;\n\n        simplifyProps(\n          {\n            props: props[property],\n            colormode,\n            platform,\n            state,\n            currentSpecificity: propertySpecity,\n            previouslyFlattenProps: previouslyFlattenProps,\n          },\n          flattenProps,\n          specificityMap,\n          priority\n        );\n      }\n    } else if (state[pseudoPropsMap[property]?.respondTo] === undefined) {\n      if (property.startsWith('_')) {\n        if (\n          compareSpecificity(specificityMap[property], propertySpecity, false)\n        ) {\n          specificityMap[property] = propertySpecity;\n          // merging internal props (like, _text, _checked, ...)\n          flattenProps[property] = merge(\n            {},\n            flattenProps[property],\n            props[property]\n          );\n        } else {\n          flattenProps[property] = merge(\n            {},\n            props[property],\n            flattenProps[property]\n          );\n        }\n      } else {\n        if (\n          compareSpecificity(specificityMap[property], propertySpecity, false)\n        ) {\n          specificityMap[property] = propertySpecity;\n          // replacing simple props (like, p, m, bg, color, ...)\n          flattenProps[property] = props[property];\n        }\n      }\n    }\n  }\n};\n\nexport const propsFlattener = (\n  {\n    props,\n    colormode,\n    platform,\n    state,\n    currentSpecificityMap,\n    previouslyFlattenProps,\n  }: any,\n  priority: number\n) => {\n  const flattenProps: any = {};\n\n  for (const property in props) {\n    if (\n      state[pseudoPropsMap[property]?.respondTo] === undefined &&\n      property.startsWith('_')\n    ) {\n      flattenProps[property] = previouslyFlattenProps[property];\n    }\n  }\n\n  const specificityMap = currentSpecificityMap || {};\n\n  // STEP 1.a (if): Check weather it should be recursively resolved\n  // NOTE: (when true) recursively resolved it\n  // STEP 1.b (else if): Check specificty\n  // STEP 1.b.i: Check for pseudo props\n  // NOTE: (when true) Merge it.\n  // NOTE: (when false) Replace it.\n\n  simplifyProps(\n    {\n      props,\n      colormode,\n      platform,\n      state,\n      currentSpecificityMap,\n      previouslyFlattenProps,\n    },\n    flattenProps,\n    specificityMap,\n    priority\n  );\n\n  return [flattenProps, specificityMap];\n};\n"]},"metadata":{},"sourceType":"module"}